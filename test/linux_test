#!/bin/bash

tar xf linux-2.6.33.20.tar.bz2
tar xf linux-3.2.8.tar.bz2
mv linux-2.6.33.20/ old
mv linux-3.2.8/ new
cd old
find . -name "*.h" -o -name "*.c" -o -name "*.cc" > files 
cd ..
cd new
cat ../old/files | gxargs -I% bash -c "[[ -e % ]] && echo %" > ../files
cd ..
cat files | gxargs -I% bash -c "cmp --quiet old/% new/% || echo %" > list

#cat files | gxargs -I% -P 10 bash -c "../bin/srcdiffc old/% new/% > new/%.xml"
#cat list | gxargs -I% -P 10 bash -c "../bin/srcdiff --literal --operator --modifier old/% new/% -o new/%.xml"

#cat files | gxargs -I% -P 10 bash -c "src2srcml --literal --operator --modifier old/% -o old/%.1.xml"
#cat files | gxargs -I% -P 10 bash -c "src2srcml --literal --operator --modifier new/% -o new/%.1.xml"
#cat list | gxargs -I% -P 10 bash -c "src2srcml --literal --operator --modifier old/% -o old/%.1.xml"
#cat list | gxargs -I% -P 10 bash -c "src2srcml --literal --operator --modifier new/% -o new/%.1.xml"

#cat  files | gxargs -I% -P 10 bash -c "../bin/srcdiff --srcml old/%.1.xml new/%.1.xml > new/%.xml"


#cat files | gxargs -I% -P 10 bash -c "srcml2src --xml --revision 1 new/%.xml | cmp old/%.1.xml /dev/stdin"
#cat files | gxargs -I% -P 10 bash -c "srcml2src --xml --revision 2 new/%.xml | cmp new/%.1.xml /dev/stdin"
#cat list | gxargs -I% -P 10 bash -c "srcml2src --xml --revision 1 new/%.xml | cmp old/%.1.xml /dev/stdin"
#cat list | gxargs -I% -P 10 bash -c "srcml2src --xml --revision 2 new/%.xml | cmp new/%.1.xml /dev/stdin"
